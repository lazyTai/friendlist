!function(n,r){"use strict";var t={};n.PubSub=t;var e=n.define;!function(n){var r={},t=-1;function e(n){var r;for(r in n)if(n.hasOwnProperty(r))return!0;return!1}function o(n,r,t){try{n(r,t)}catch(n){setTimeout((e=n,function(){throw e}),0)}var e}function i(n,r,t){n(r,t)}function u(n,t,e,u){var s,f=r[t],c=u?i:o;if(r.hasOwnProperty(t))for(s in f)f.hasOwnProperty(s)&&c(f[s],n,e)}function s(n,t,o,i){var s,f,c,a=(s=n,f=t,c=i,function(){var n=String(s),r=n.lastIndexOf(".");for(u(s,s,f,c);-1!==r;)n=n.substr(0,r),r=n.lastIndexOf("."),u(s,n,f,c)}),p=function(n){var t=String(n),o=Boolean(r.hasOwnProperty(t)&&e(r[t])),i=t.lastIndexOf(".");for(;!o&&-1!==i;)t=t.substr(0,i),i=t.lastIndexOf("."),o=Boolean(r.hasOwnProperty(t)&&e(r[t]));return o}(n);return!!p&&(!0===o?a():setTimeout(a,0),!0)}n.publish=function(r,t){return s(r,t,!1,n.immediateExceptions)},n.publishSync=function(r,t){return s(r,t,!0,n.immediateExceptions)},n.subscribe=function(n,e){if("function"!=typeof e)return!1;r.hasOwnProperty(n)||(r[n]={});var o="uid_"+String(++t);return r[n][o]=e,o},n.subscribeOnce=function(r,t){var e=n.subscribe(r,function(){n.unsubscribe(e),t.apply(this,arguments)});return n},n.clearAllSubscriptions=function(){r={}},n.clearSubscriptions=function(n){var t;for(t in r)r.hasOwnProperty(t)&&0===t.indexOf(n)&&delete r[t]},n.unsubscribe=function(t){var e,o,i,u="string"==typeof t&&(r.hasOwnProperty(t)||function(n){var t;for(t in r)if(r.hasOwnProperty(t)&&0===t.indexOf(n))return!0;return!1}(t)),s=!u&&"string"==typeof t,f="function"==typeof t,c=!1;if(!u){for(e in r)if(r.hasOwnProperty(e)){if(o=r[e],s&&o[t]){delete o[t],c=t;break}if(f)for(i in o)o.hasOwnProperty(i)&&o[i]===t&&(delete o[i],c=!0)}return c}n.clearSubscriptions(t)}}(t),"function"==typeof e&&e.amd?e(function(){return t}):"object"==typeof exports&&(void 0!==module&&module.exports&&(exports=module.exports=t),exports.PubSub=t,module.exports=exports=t)}("object"==typeof window&&window||this);